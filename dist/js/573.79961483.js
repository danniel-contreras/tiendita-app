"use strict";(self["webpackChunktiendita_app"]=self["webpackChunktiendita_app"]||[]).push([[573],{5282:function(e,t,o){var a=o(6265),n=o.n(a),l=o(5070),s=o(3867);t["Z"]={async addProduct(e){return await n().post(`${l.J}products`,e,{headers:{authorization:(0,s.LP)()}})},async getProducts(e,t=(0,s.bh)(),o,a){return await n().get(`${l.J}products?page=${e}&storeId=${t}&categorie=${o}&name=${a}`,{headers:{authorization:(0,s.LP)()}})},async putProduct(e,t){return await n().put(`${l.J}products/${t}`,e,{headers:{authorization:(0,s.LP)()}})},async getProductsStock(){return await n().get(`${l.J}products/stockMinimun`,{headers:{authorization:(0,s.LP)()}})}}},1232:function(e,t,o){o.d(t,{BV:function(){return r},G5:function(){return c},ch:function(){return i},q_:function(){return d}});var a=o(6265),n=o.n(a),l=o(5070),s=o(3867);const r=e=>n().post(`${l.J}shopping`,e,{headers:{authorization:(0,s.LP)()}}),i=e=>n().get(`${l.J}shopping?page=${e}&limit=5`,{headers:{authorization:(0,s.LP)()}}),d=e=>n().get(`${l.J}detail-shopping/shopping/${e}`,{headers:{authorization:(0,s.LP)()}}),c=(e=1,t=10,o)=>n().get(`${l.J}shopping/box/${o}?page=${e}&limit=${t}`,{headers:{authorization:(0,s.LP)()}})},3718:function(e,t,o){o.d(t,{Z:function(){return M}});var a=o(9306),n=o(9242);const l={class:"py-4 overflow-x-auto mt-6"},s={class:"inline-block min-w-full border shadow-xl rounded-lg overflow-hidden"},r={class:"min-w-full leading-normal"},i={class:"border-gradient-2 flex justify-center items-center"},d=["onClick"],c=(0,a._)("span",{class:"text-gradient whitespace-nowrap font-semibold text-xs font-mono"},"Ver detalle",-1),u=[c],p={class:"inline-block min-w-full border shadow-xl rounded-lg overflow-hidden"},m={class:"min-w-full leading-normal"};function h(e,t,o,c,h,g){const x=(0,a.up)("th-table"),b=(0,a.up)("td-table"),w=(0,a.up)("modal-component");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",s,[(0,a._)("table",r,[(0,a._)("thead",null,[(0,a.Wm)(x,{name:"Fecha"}),(0,a.Wm)(x,{name:"Tipo de recibo"}),(0,a.Wm)(x,{name:"N° de recibo"}),(0,a.Wm)(x,{name:"Acciones"})]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.shoppings,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a.Wm)(b,{name:g.formatDate(e.date)},null,8,["name"]),(0,a.Wm)(b,{name:e.voucherType},null,8,["name"]),(0,a.Wm)(b,{name:e.nVoucher},null,8,["name"]),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("button",{onClick:t=>g.getDetails(e.id),class:"w-full h-full button-gradient bg-white rounded-2xl py-1 px-3"},u,8,d)])])),_:2},1024)])))),128))])])]),(0,a.wy)((0,a.Wm)(w,{onClose:g.showModal,title:"Detalles de la compra"},{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a._)("table",m,[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a.Wm)(x,{name:"Producto"}),(0,a.Wm)(x,{name:"Precio Compra"}),(0,a.Wm)(x,{name:"Precio Venta"}),(0,a.Wm)(x,{name:"Cantidad"}),(0,a.Wm)(x,{name:"Total"})])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.shopping,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a.Wm)(b,{name:e.products.name},null,8,["name"]),(0,a.Wm)(b,{name:"$"+e.purchasePrice},null,8,["name"]),(0,a.Wm)(b,{name:"$"+e.salePrice},null,8,["name"]),(0,a.Wm)(b,{name:e.quantity},null,8,["name"]),(0,a.Wm)(b,{name:"$"+e.totalUnit},null,8,["name"])])))),128))])])])])),_:1},8,["onClose"]),[[n.F8,h.visible]])])}var g=o(1848),x=o(1743),b=o(3748),w=o(6963),f=o(505),y=o(1232),P=o(422),v={components:{ThTable:x.Z,TdTable:g.Z,ModalComponent:P.Z},props:{shoppings:{type:Array}},data(){return{shopping:[],visible:!1}},methods:{showModal(){this.visible=!this.visible},formatDate(e){return(0,b.Z)((0,w.Z)(new Date(e),0),new Date,{locale:f.Z})},getDetails(e){(0,y.q_)(e).then((({data:e})=>{this.showModal(),this.shopping=e.detailShopping}))}}},_=o(89);const C=(0,_.Z)(v,[["render",h]]);var M=C},9573:function(e,t,o){o.r(t),o.d(t,{default:function(){return Be}});var a=o(9306),n=o(7139),l=o(9242);const s={class:"w-full"},r={class:"flex justify-center text-gray-500 bg-gray-100 rounded py-2 px-2"},i=(0,a._)("li",{class:"text-gray-500 select-none md:text-xs lg:text-sm"}," › ",-1),d={class:"text-gray-600 font-semibold"};function c(e,t,o,c,u,p){const m=(0,a.up)("shopping-table-history"),h=(0,a.up)("pagination-component"),g=(0,a.up)("shopping-form"),x=(0,a.up)("layout-view");return(0,a.wg)(),(0,a.j4)(x,null,{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("ol",r,[(0,a._)("li",{onClick:t[0]||(t[0]=e=>p.changeBread(1)),class:(0,n.C_)(["px-2 cursor-pointer text-gradient md:text-xs lg:text-sm",1===u.bread&&"font-bold"])}," Listado de Compra de Productos ",2),i,(0,a._)("li",{onClick:t[1]||(t[1]=e=>p.changeBread(2)),class:(0,n.C_)(["px-2 cursor-pointer text-gradient md:text-xs lg:text-sm",2===u.bread&&"font-bold"])}," Agregar Compra de Productos ",2)])]),(0,a._)("div",null,[(0,a.wy)((0,a.Wm)(m,{shoppings:u.shoppings},null,8,["shoppings"]),[[l.F8,1===u.bread]]),(0,a.wy)((0,a._)("span",d,"No se an registrado compras",512),[[l.F8,u.empty]]),u.totalPag>1?(0,a.wy)(((0,a.wg)(),(0,a.j4)(h,{key:0,onMethod:p.getShoppingHistory,currentPage:u.currentPage,pages:u.pages,totalPag:u.totalPag,next:u.next,prev:u.prev},null,8,["onMethod","currentPage","pages","totalPag","next","prev"])),[[l.F8,1===u.bread]]):(0,a.kq)("",!0)]),2===u.bread?((0,a.wg)(),(0,a.j4)(g,{key:0,onChangeBread:p.changeBread,onGetShopping:p.getShoppingHistory},null,8,["onChangeBread","onGetShopping"])):(0,a.kq)("",!0)])),_:1})}var u=o(1232);const p={class:"flex w-full mt-6"},m={class:"flex flex-col"},h=(0,a._)("span",{class:"text-gradient font-semibold text-lg text-center"},"Nueva compra",-1),g={class:"flex flex-col mt-4"},x=(0,a._)("label",{class:"text-gradient text-sm font-semibold"},"Proveedor",-1),b=(0,a._)("option",{selected:"",disabled:""},"Selecciona el proveedor",-1),w=["value"],f={class:"flex flex-col mt-3"},y=(0,a._)("label",{class:"text-gradient text-sm font-semibold"},"Tipo de recibo",-1),P={class:"flex flex-col mt-3"},v=(0,a._)("label",{class:"text-gradient text-sm font-semibold"},"Numero de recibo",-1),_={class:"flex mt-4"},C=(0,a._)("span",{class:"text-gradient font-semibold"},"Usara dinero de caja? ",-1),M={class:"flex flex-col mt-5"},B=(0,a._)("span",{class:"text-gradient text-sm font-semibold"},"Cantidad a dinero a usar ",-1),k={class:"flex flex-col ml-16"},W=(0,a._)("span",{class:"text-gradient font-semibold text-lg text-center"},"Productos a comprar",-1),S={class:"inline-block min-w-full mt-4 border shadow-xl rounded-lg overflow-hidden"},$={class:"min-w-full leading-normal"},V=["value","onInput"],Z=["value","onInput"],D=["value","onInput"];function F(e,t,o,s,r,i){const d=(0,a.up)("select-box"),c=(0,a.up)("modal-component"),u=(0,a.up)("th-table"),F=(0,a.up)("td-table"),T=(0,a.up)("shopping-table");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",p,[(0,a._)("div",m,[h,(0,a._)("button",{onClick:t[0]||(t[0]=(...e)=>i.showModal&&i.showModal(...e)),class:"bg-green-500 text-sm font-semibold mt-4 py-2 rounded-lg text-white"}," Seleccionar Productos "),(0,a._)("div",g,[x,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.data.providerId=e),class:"border rounded px-2 py-2 w-full"},[b,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.providers,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,n.zw)(e.name),9,w)))),128))],512),[[l.bM,r.data.providerId]])]),(0,a._)("div",f,[y,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.data.voucherType=e),placeholder:"Escribe el tipo de recibo",class:"border rounded px-2 text-sm py-2 w-full"},null,512),[[l.nr,r.data.voucherType]])]),(0,a._)("div",P,[v,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.data.nVoucher=e),placeholder:"Escribe el numero de recibo",class:"border rounded px-2 text-sm py-2 w-full"},null,512),[[l.nr,r.data.nVoucher]])]),(0,a._)("div",_,[C,(0,a.wy)((0,a._)("input",{onChange:t[4]||(t[4]=(...e)=>i.showModalBox&&i.showModalBox(...e)),"onUpdate:modelValue":t[5]||(t[5]=e=>r.cashBox=e),class:"w-5 h-5 ml-6 mt-1 pt-1",type:"checkbox"},null,544),[[l.e8,r.cashBox]])]),(0,a.wy)((0,a._)("div",M,[B,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.data.howMuch=e),type:"number",placeholder:"Escribe la cantidad de dinero que usaras de caja",class:"border rounded px-2 py-2 w-full"},null,512),[[l.nr,r.data.howMuch]])],512),[[l.F8,r.cashBox]]),(0,a.wy)((0,a.Wm)(c,{onClose:i.closeModalBox,title:"Seleccionar Caja"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{onCloseModalBox:i.closeModalBox,boxes:r.boxes},null,8,["onCloseModalBox","boxes"])])),_:1},8,["onClose"]),[[l.F8,r.boxModal&&r.cashBox]])]),(0,a._)("div",k,[W,(0,a._)("div",S,[(0,a._)("table",$,[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a.Wm)(u,{name:"Producto"}),(0,a.Wm)(u,{name:"Cantidad"}),(0,a.Wm)(u,{name:"Precio Compra"}),(0,a.Wm)(u,{name:"Precio Venta"})])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.listProducts,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a.Wm)(F,{name:e.name},null,8,["name"]),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a._)("input",{type:"number",class:"border w-full py-1 text-xs px-3 rounded",value:e.quantity,onInput:t=>i.sumQuantity(e.id,t.target.value)},null,40,V)])),_:2},1024),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a._)("input",{value:e.price,class:"border w-24 py-1 text-xs rounded px-2",onInput:t=>i.setPShop(e.id,t.target.value)},null,40,Z)])),_:2},1024),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a._)("input",{value:e.price,class:"border w-24 py-1 text-xs rounded px-2",onInput:t=>i.setPSale(e.id,t.target.value)},null,40,D)])),_:2},1024)])))),128))])])])]),(0,a.wy)((0,a.Wm)(c,{onClose:i.closeModal,title:"Seleccionar los productos a comprar"},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{currentPage:r.currentPage,next:r.next,prev:r.prev,pages:r.pages,totalPag:r.totalPag,onGetProducts:i.getProducts,onSetList:i.setListProducts,products:r.products},null,8,["currentPage","next","prev","pages","totalPag","onGetProducts","onSetList","products"])])),_:1},8,["onClose"]),[[l.F8,r.modalVisible]])]),(0,a._)("button",{onClick:t[7]||(t[7]=(...e)=>i.realize&&i.realize(...e)),class:"bg-blue-500 rounded py-3 px-16 mt-8 text-white"}," Realizar Pedido ")])}var T=o(422);const j={class:"inline-block min-w-full border shadow-xl rounded-lg overflow-hidden"},z={class:"min-w-full leading-normal"},L=["id","value"],I={class:"border-gradient-2 md:mt-4 lg:mt-5 flex justify-center items-center"},N=(0,a._)("span",{class:"text-gradient font-semibold text-base font-mono"},"Aceptar",-1),H=[N];function q(e,t,o,n,s,r){const i=(0,a.up)("th-table"),d=(0,a.up)("td-table"),c=(0,a.up)("pagination-component");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",j,[(0,a._)("table",z,[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a.Wm)(i,{name:"Producto"}),(0,a.Wm)(i,{name:"Stock"}),(0,a.Wm)(i,{name:"Seleccionar"})])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.products,((e,o)=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a.Wm)(d,{name:e.name},null,8,["name"]),(0,a.Wm)(d,{name:e.stock},null,8,["name"]),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("input",{class:"w-5 h-5 ml-6 pt-1",type:"checkbox",id:"input-"+o,value:{name:e.name,id:e.id,quantity:1,price:e.price,salePrice:e.price,purchasePrice:e.price},"onUpdate:modelValue":t[0]||(t[0]=e=>s.product=e)},null,8,L),[[l.e8,s.product]])])),_:2},1024)])))),128))])])]),o.totalPag>1?((0,a.wg)(),(0,a.j4)(c,{key:0,onMethod:r.getProd,currentPage:o.currentPage,pages:o.pages,totalPag:o.totalPag,next:o.next,prev:o.prev},null,8,["onMethod","currentPage","pages","totalPag","next","prev"])):(0,a.kq)("",!0),(0,a._)("div",I,[(0,a._)("button",{onClick:t[1]||(t[1]=(...e)=>r.setProducts&&r.setProducts(...e)),type:"submit",class:"w-full h-full button-gradient bg-white rounded-2xl py-1"},H)])])}var U=o(2129),A=o(1848),J=o(1743),G={components:{ThTable:J.Z,TdTable:A.Z,PaginationComponent:U.Z},props:{products:{type:Object},setList:{type:Function},totalPag:{type:Number},currentPage:{type:Number},pages:{type:Array},next:{type:Number},prev:{type:Number},getProducst:{type:Function}},data(){return{product:[]}},methods:{setProducts(){this.$emit("setList",this.product)},getProd(e){this.$emit("getProducts",e)}}},K=o(89);const Y=(0,K.Z)(G,[["render",q]]);var O=Y,E=o(5282),Q=o(2648),R=o(3867),X=o(3954);const ee={class:"grid grid-cols-3 gap-6 justify-center items-center"},te={class:"text-gradient font-semibold text-xl"},oe={class:"text-gradient font-semibold text-xl"},ae=["onClick"];function ne(e,t,o,s,r,i){const d=(0,a.up)("font-awesome-icon"),c=(0,a.up)("new-box");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.wy)((0,a._)("div",ee,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.boxes,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"mx-6 h-36 p-4 border rounded flex flex-col justify-center items-center",key:e.id},[(0,a._)("span",te,"Monto inicial: $"+(0,n.zw)(e.boxStart),1),(0,a._)("span",oe,"Usuario: "+(0,n.zw)(e.users.name),1),(0,a._)("button",{onClick:t=>i.selectBox(e.id),class:"bg-blue-500 text-white font-semibold py-2 px-10 rounded mt-2"}," Seleccionar ",8,ae)])))),128)),(0,a._)("div",{onClick:t[0]||(t[0]=(...e)=>i.showForm&&i.showForm(...e)),class:"w-20 h-20 p-4 text-2xl flex flex-col justify-center items-center cursor-pointer border"},[(0,a.Wm)(d,{icon:"plus"})])],512),[[l.F8,!r.newBox]]),(0,a.wy)((0,a.Wm)(c,{onClose:i.closeModal,onCancel:i.hiddeForm},null,8,["onClose","onCancel"]),[[l.F8,r.newBox]])])}const le={class:"w-full h-full flex justify-center items-center"},se={class:"w-96 h-auto p-6 border shadow rounded"},re=(0,a._)("span",{class:"text-lg text-gradient font-semibold"}," Crear nueva caja ",-1),ie={class:"text-left mt-3"},de=(0,a._)("label",{class:"my-2 text-xs text-gradient font-semibold"}," Monto inicial ",-1),ce={class:"grid grid-cols-2 gap-6"};function ue(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",le,[(0,a._)("div",se,[re,(0,a._)("div",ie,[de,(0,a.wy)((0,a._)("input",{name:"boxStart",type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>s.data.boxStart=e),placeholder:"Escribe el monto inicial",class:"border w-full text-xs py-2 px-3 rounded"},null,512),[[l.nr,s.data.boxStart]])]),(0,a._)("div",ce,[(0,a._)("button",{onClick:t[1]||(t[1]=(...e)=>r.newBox&&r.newBox(...e)),class:"bg-blue-500 w-full text-white py-2 mt-4 text-lg font-semibold px-8 rounded-xl"}," Guardar "),(0,a._)("button",{onClick:t[2]||(t[2]=(...e)=>r.cancelM&&r.cancelM(...e)),type:"button",class:"bg-red-500 w-full text-white py-2 mt-4 text-lg font-semibold px-8 rounded-xl"}," Cancelar ")])])])}var pe={props:{cancel:{type:Function},close:{type:Function}},data(){return{data:{boxStart:0}}},methods:{cancelM(){this.$emit("cancel")},newBox(){(0,X.Gt)(this.data).then((({data:e})=>{(0,X.jA)(e.expenses.id),this.$emit("close")}))}}};const me=(0,K.Z)(pe,[["render",ue]]);var he=me,ge={components:{NewBox:he},props:{boxes:{type:Object},closeModalBox:{type:Function}},data(){return{newBox:!1}},methods:{showForm(){this.newBox=!0},closeModal(){this.$emit("closeModalBox")},hiddeForm(){this.newBox=!1},selectBox(e){(0,X.jA)(e),this.closeModal()}}};const xe=(0,K.Z)(ge,[["render",ne]]);var be=xe,we=o(7169),fe={props:{changeBread:{type:Function},getShopping:{type:Function}},components:{ModalComponent:T.Z,ShoppingTable:O,ThTable:J.Z,TdTable:A.Z,SelectBox:be},data(){return{modalVisible:!1,products:{},listProducts:[],pages:[],currentPage:0,next:0,prev:0,totalPag:0,qt:1,cashBox:!1,boxModal:!1,boxes:[],providers:[],data:{voucherType:"",nVoucher:"",providerId:"",howMuch:0}}},methods:{showModal(){this.modalVisible=!0},closeModal(){this.modalVisible=!1},showModalBox(){this.boxModal=!0},closeModalBox(){this.boxModal=!1},getProducts(e=1){E.Z.getProducts(e,(0,R.bh)(),"","").then((({data:e})=>{e.ok&&(this.products=e.products,this.pages=(0,Q.V)(e.curentPag,e.totalPag,1),this.totalPag=e.totalPag,this.next=e.nextPag,this.prev=e.prevPag,this.currentPage=e.curentPag)}))},getProviders(){we.Z.getProviders(1,1e7).then((({data:e})=>{this.providers=e.providers}))},getBoxes(){(0,X.BX)().then((({data:e})=>{this.boxes=e.box}))},setListProducts(e){this.listProducts=e,this.closeModal()},sumQuantity(e,t){const o=this.listProducts.find((t=>t.id===e)),a=this.listProducts.indexOf(o);this.listProducts[a].quantity=Number(t)},setPSale(e,t){const o=this.listProducts.find((t=>t.id===e)),a=this.listProducts.indexOf(o);this.listProducts[a].salePrice=Number(t)},setPShop(e,t){const o=this.listProducts.find((t=>t.id===e)),a=this.listProducts.indexOf(o);this.listProducts[a].purchasePrice=Number(t)},realize(){const e={providerId:this.data.providerId,voucherType:this.data.voucherType,nVoucher:this.data.nVoucher,cashBox:this.cashBox,howMuch:this.data.howMuch,boxId:(0,X.iz)(),products:this.listProducts};(0,u.BV)(e).then((({data:e})=>{e.ok&&(this.$toast.info("Se guardo la compra"),this.$emit("changeBread",2),this.$emit("getShopping"))})).catch((()=>{this.$toast.error("Ah ocurrido un error inesperado")}))}},mounted(){this.getProducts(1),this.getBoxes(),this.getProviders()}};const ye=(0,K.Z)(fe,[["render",F]]);var Pe=ye,ve=o(3718),_e=o(741),Ce={name:"ShoppingHistoryView",components:{LayoutView:_e.Z,ShoppingForm:Pe,ShoppingTableHistory:ve.Z,PaginationComponent:U.Z},data(){return{bread:1,shoppings:[],pages:[],currentPage:0,next:0,prev:0,totalPag:0,empty:!1}},methods:{changeBread(e){this.bread=e},getShoppingHistory(e=1){(0,u.ch)(e).then((({data:e})=>{this.shoppings=e.shopping,this.pages=(0,Q.V)(e.curentPag,e.totalPag,1),this.totalPag=e.totalPag,this.next=e.nextPag,this.prev=e.prevPag,this.currentPage=e.curentPag})).catch((({data:e})=>{this.empty=!0,e.ok?this.$toast.error("Ah ocurrido un error inesperado"):this.$toast.warning("No hay registros para mostrar")}))}},mounted(){this.getShoppingHistory()}};const Me=(0,K.Z)(Ce,[["render",c]]);var Be=Me}}]);
//# sourceMappingURL=573.79961483.js.map