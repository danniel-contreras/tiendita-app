"use strict";(self["webpackChunktiendita_app"]=self["webpackChunktiendita_app"]||[]).push([[126],{8341:function(e,t,a){a.d(t,{Z:function(){return k}});var l=a(9306),n=a(9242);const o={class:"py-4 overflow-x-auto mt-6"},s={class:"inline-block min-w-full border shadow-xl rounded-lg overflow-hidden"},r={class:"min-w-full leading-normal"},i={class:"border-gradient-2 flex justify-center items-center"},d=["onClick"],u=(0,l._)("span",{class:"text-gradient whitespace-nowrap font-semibold text-xs font-mono"},"Ver detalle",-1),m=[u],c={class:"inline-block min-w-full border shadow-xl rounded-lg overflow-hidden"},p={class:"min-w-full leading-normal"};function g(e,t,a,u,g,h){const w=(0,l.up)("th-table"),f=(0,l.up)("td-table"),b=(0,l.up)("modal-component");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",s,[(0,l._)("table",r,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l.Wm)(w,{name:"Fecha"}),(0,l.Wm)(w,{name:"Total"}),(0,l.Wm)(w,{name:"Acciones"})])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.sales,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l.Wm)(f,{name:h.formatDate(e.dateOfSale)},null,8,["name"]),(0,l.Wm)(f,{name:`$${e.total}`},null,8,["name"]),(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("button",{onClick:t=>h.getDetails(e.id),class:"w-full h-full button-gradient bg-white rounded-2xl py-1 px-3"},m,8,d)])])),_:2},1024)])))),128))])])]),(0,l.wy)((0,l.Wm)(b,{onClose:h.showModal,title:"Detalles de la venta"},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("table",p,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l.Wm)(w,{name:"Producto"}),(0,l.Wm)(w,{name:"Cantidad"}),(0,l.wy)((0,l.Wm)(w,{name:"Total"},null,512),[[n.F8,!a.report]])])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.sale,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l.Wm)(f,{name:e.products.name},null,8,["name"]),(0,l.Wm)(f,{name:e.quantity},null,8,["name"]),(0,l.wy)((0,l.Wm)(f,{name:"$"+e.totalUnit},null,8,["name"]),[[n.F8,!a.report]])])))),128))])])])])),_:1},8,["onClose"]),[[n.F8,g.visible]])])}var h=a(1743),w=a(3748),f=a(6963),b=a(505),v=a(1848),y=a(1807),_=a(422),P={components:{ThTable:h.Z,TdTable:v.Z,ModalComponent:_.Z},props:{sales:{type:Object},report:{type:Boolean}},data(){return{sale:[],visible:!1}},methods:{showModal(){this.visible=!this.visible},formatDate(e){return(0,w.Z)((0,f.Z)(new Date(e),0),new Date,{locale:b.Z})},getDetails(e){(0,y.Wd)(e).then((({data:e})=>{this.sale=e.sales,this.showModal()}))}}},x=a(89);const W=(0,x.Z)(P,[["render",g]]);var k=W},1126:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var l=a(9306),n=a(9242);const o=(0,l._)("p",{class:"text-lg font-semibold text-gradient"},"Historial de ventas",-1),s={class:"text-gray-600 font-semibold"};function r(e,t,a,r,i,d){const u=(0,l.up)("sales-table"),m=(0,l.up)("pagination-component"),c=(0,l.up)("layout-view");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[o,(0,l.Wm)(u,{sales:i.sales},null,8,["sales"]),(0,l.wy)((0,l._)("span",s,"No se an registrado ventas",512),[[n.F8,i.empty]]),i.totalPag>1?((0,l.wg)(),(0,l.j4)(m,{key:0,onMethod:d.getAllSales,currentPage:i.currentPage,pages:i.pages,totalPag:i.totalPag,next:i.next,prev:i.prev},null,8,["onMethod","currentPage","pages","totalPag","next","prev"])):(0,l.kq)("",!0)])),_:1})}var i=a(8341),d=a(741),u=a(1807),m=a(2648),c=a(2129),p={name:"SalesHistoryView",components:{LayoutView:d.Z,SalesTable:i.Z,PaginationComponent:c.Z},data(){return{sales:{},pages:[],currentPage:0,next:0,prev:0,totalPag:0,empty:!1}},methods:{getAllSales(e=1){(0,u.X8)(e).then((({data:e})=>{this.sales=e.sales,this.pages=(0,m.V)(e.curentPag,e.totalPag,1),this.totalPag=e.totalPag,this.next=e.nextPag,this.prev=e.prevPag,this.currentPage=e.curentPag})).catch((({data:e})=>{this.empty=!0,e.ok?this.$toast.error("Ah ocurrido un error inesperado"):this.$toast.warning("No hay registros para mostrar")}))}},mounted(){this.getAllSales(1)}},g=a(89);const h=(0,g.Z)(p,[["render",r]]);var w=h}}]);
//# sourceMappingURL=126.d22b5c89.js.map